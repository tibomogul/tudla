<%# Quick-add task form for a given scope %>
<%# locals: scope:, project: (optional) %>
<%= turbo_frame_tag dom_id(scope, :new_task_form) do %>
  <%= form_with model: Task.new, url: tasks_path, data: { turbo: true }, html: { id: "#{dom_id(scope, :new_task_form)}_form" } do |f| %>
    <div class="flex items-center gap-2 mt-3">
      <%= f.hidden_field :scope_id, value: scope.id %>
      <%= f.hidden_field :project_id, value: (defined?(project) && project.present?) ? project.id : scope.project_id %>
      <%= f.text_field :name,
            placeholder: "Add new task...",
            class: "input input-bordered input-sm w-full",
            required: true,
            pattern: ".*\\S.*",
            title: "Please enter a task name (not blank)." %>
      <%= f.submit "Add", class: "btn btn-sm btn-primary" %>
    </div>
  <% end %>
<% end %>
