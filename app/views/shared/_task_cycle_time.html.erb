<h2 class="text-2xl font-bold mb-4">Cycle Time per Developer</h2>

<table class="table table-zebra w-full mb-6">
  <thead>
    <tr>
      <th>User</th>
      <th>Avg Cycle Time</th>
      <th>Median</th>
      <th>Fastest</th>
      <th>Slowest</th>
      <th>Completed Tasks</th>
    </tr>
  </thead>
  <tbody>
    <% @results.each do |r| %>
      <tr>
        <td><%= r.user&.email || "Unknown" %></td>
        <td><%= distance_of_time_in_words(r.avg) if r.avg %></td>
        <td><%= distance_of_time_in_words(r.median) if r.median %></td>
        <td><%= distance_of_time_in_words(r.min) if r.min %></td>
        <td><%= distance_of_time_in_words(r.max) if r.max %></td>
        <td><%= r.count %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= bar_chart(
  @results.map { |r| [r.user&.email || "Unknown", r.avg.to_f / 3600] },
  module: true,
  xtitle: "Developer",
  ytitle: "Avg Cycle Time (hours)",
  colors: ["#10b981"]
) %>
