<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
  </head>
  <body>
    <% if @report_requirement.reminder.negative? %>
      <h2 style="color: #dc2626;">Report Past Due</h2>
      
      <p>Hello <%= @user.preferred_name || @user.username %>,</p>
      
      <p>
        This is a reminder that you have a report that was due on 
        <strong style="color: #dc2626;"><%= @next_occurrence.to_date %></strong> for:
      </p>
      
      <p><strong><%= @reportable.class.name %>:</strong> <%= @reportable.name %></p>
      
      <p style="background-color: #fef2f2; padding: 15px; border-left: 3px solid #dc2626; color: #991b1b;">
        <strong>This report is now past due.</strong> Please submit it as soon as possible.
      </p>
    <% else %>
      <h2>Report Reminder</h2>
      
      <p>Hello <%= @user.preferred_name || @user.username %>,</p>
      
      <p>
        This is a reminder that you have a report due on 
        <strong><%= @next_occurrence.to_date %></strong> for:
      </p>
      
      <p><strong><%= @reportable.class.name %>:</strong> <%= @reportable.name %></p>
    <% end %>
    
    <% if @report_requirement.template.present? %>
      <h3>Report Template:</h3>
      <div style="background-color: #f5f5f5; padding: 15px; border-left: 3px solid #3b82f6;">
        <%= simple_format(@report_requirement.template) %>
      </div>
    <% end %>
    
    <% unless @report_requirement.reminder.negative? %>
      <p>
        Please submit your report by the due date.
      </p>
    <% end %>
    
    <p>Thank you!</p>
  </body>
</html>
